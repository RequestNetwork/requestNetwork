os: osx
language: node_js
node_js:
  - "8"

install:
  - npm install -g lerna
  - lerna bootstrap
  - npm install -g ganache-cli
  - npm install -g truffle@4.0.5
  - brew install ipfs
  - ipfs init

before_script:
  - ipfs daemon > ipfs-travis.log &
  - lerna run --scope @requestnetwork/request-network.js ganache > ganache-travis.log &
  - sleep 3
  - lerna run --scope @requestnetwork/request-network.js testdeploy

script:
  - lerna run --scope @requestnetwork/request-network.js test
  - lerna run --scope request-network-smart-contracts test

after_failure:
  - cat ipfs-travis.log
  - cat ganache-travis.log
  - npm config list
  
notifications:
  slack:
    secure: Sd0puLRVIg1HTLPvPj3v4Ms/hlB3VtgEAmgdpdmKeGnqLNJe9UHwANTw9YNaRY2nX4TaiL629ubiN/QpZV3FRKhpPpNTJ0xzG82hMp6C0yRdHOVy+spsbn/zljgJt6kSpeJKQJ9HVDREbxdzqYSOiSPngjBkEihKvRYI0mz9YYvBJ6xX57ylbLr27SeGdAlrS2vSwLCUdTqMdJclV+N+AGW4J9Jru2Y0xRvaVbDKZWHzMWWVvT9jhY3PV8nlqieAl4iBlpaHcgS0oI1DHuEMszSPIHYEIGgyH/yV47+aTlE6reWimA16EPeNJdfzIVw+x+1bLUJ416g4Y6Jh7Xgu0V9ucucsA+vxLvAQehGoblIQLrkAZd3BdMx8SxClcSWZHSDR8Hs/DDQuMjzonsRNDkpxjrAWLc6xwoMuj1ZAu5jnSmjP9Ss7JpC01JJlUtT8BlBSUlrgWI7hHqbzbseU0XREPc7IT6dR0kksERIBgHaBoc3RFcZsD7G0EVegxxlxpp3/UUr9fIniabkYG1WIdhG2h0E8dBeSHmWX5WvwlWXanR/We59gDl6tXlOnIvDu6zsnsw1DhnUj8BxZdrNssjlPR/4hoQh5T8Zui9aKcNjBsMGoXmtxQeYewWCwbtuVMjmF9stRMvjyzSC+X/dpUCDtFNTfCE+9IDmE0zprXwc

